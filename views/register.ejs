<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sign Up</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center px-4 py-10">
  <div class="bg-white p-10 rounded-xl shadow-2xl w-full max-w-lg">
    <h2 class="text-3xl font-extrabold text-center text-gray-800 mb-8">Sign Up</h2>

    <form id="registrationForm" class="space-y-6" action="/register" method="POST">
      <!-- First Name -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">First Name</label>
        <input type="text" name="first_name" placeholder="John" required
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      </div>

      <!-- Last Name -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Last Name</label>
        <input type="text" name="last_name" placeholder="Doe" required
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      </div>

      <!-- Email -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Email</label>
        <input type="email" name="email" placeholder="you@example.com" required
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      </div>

      <!-- Username -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Username</label>
        <input type="text" name="username" placeholder="yourusername" required
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      </div>

      <!-- Phone -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Phone Number</label>
        <input type="tel" name="phone" id="phone" maxlength="10" placeholder="10-digit number" required
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <p id="phone-error" class="text-sm text-red-500 hidden mt-1">Enter a valid 10-digit phone number.</p>
      </div>

      <!-- Gender -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Gender</label>
        <div class="flex items-center gap-4 mt-1 text-gray-600">
          <label><input type="radio" name="gender" value="male" required /> Male</label>
          <label><input type="radio" name="gender" value="female" /> Female</label>
          <label><input type="radio" name="gender" value="other" /> Other</label>
        </div>
      </div>

      <!-- DOB -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Date of Birth</label>
        <input type="text" id="dob" name="dob" placeholder="Select your DOB" required
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      </div>

      <!-- Address -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Address</label>
        <textarea name="address" placeholder="Your full address..." required
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"></textarea>
      </div>

      <!-- Password -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Password</label>
        <div class="relative">
          <input type="password" id="password" name="password" required
            class="w-full border rounded-lg px-4 py-2 pr-12 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <button type="button" id="togglePassword"
            class="absolute right-3 top-2.5 text-sm text-gray-600 hover:text-gray-900">Show</button>
        </div>
      </div>

      <!-- Confirm Password -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Confirm Password</label>
        <div class="relative">
          <input type="password" id="confirm_password" name="confirm_password" required
            class="w-full border rounded-lg px-4 py-2 pr-12 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <button type="button" id="toggleConfirmPassword"
            class="absolute right-3 top-2.5 text-sm text-gray-600 hover:text-gray-900">Show</button>
        </div>
        <p id="match-error" class="text-sm text-red-500 hidden mt-1">Passwords do not match.</p>
      </div>

      <!-- Terms -->
      <div class="flex items-start gap-2 text-sm">
        <input type="checkbox" name="terms" required />
        <label>I agree to the terms and conditions</label>
      </div>

      <!-- Submit -->
      <button type="submit"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg transition">
        Sign Up
      </button>

      <!-- Success Message -->
      <p id="success-message" class="text-green-600 text-center font-semibold mt-4 hidden">
        âœ… Registration Successful!
      </p>
    </form>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    flatpickr("#dob", {
      dateFormat: "Y-m-d",
      maxDate: "today",
      altInput: true,
      altFormat: "F j, Y"
    });

    const form = document.getElementById('registrationForm');
    const phone = document.getElementById('phone');
    const phoneError = document.getElementById('phone-error');
    const password = document.getElementById('password');
    const confirm = document.getElementById('confirm_password');
    const errorMatch = document.getElementById('match-error');
    const togglePassword = document.getElementById('togglePassword');
    const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
    const successMessage = document.getElementById('success-message');

    togglePassword.onclick = () => {
      password.type = password.type === 'password' ? 'text' : 'password';
      togglePassword.textContent = password.type === 'password' ? 'Show' : 'Hide';
    };
    toggleConfirmPassword.onclick = () => {
      confirm.type = confirm.type === 'password' ? 'text' : 'password';
      toggleConfirmPassword.textContent = confirm.type === 'password' ? 'Show' : 'Hide';
    };

    function checkPasswordMatch() {
      if (password.value !== confirm.value) {
        confirm.setCustomValidity("Passwords don't match");
        errorMatch.classList.remove("hidden");
      } else {
        confirm.setCustomValidity("");
        errorMatch.classList.add("hidden");
      }
    }

    password.addEventListener('input', checkPasswordMatch);
    confirm.addEventListener('input', checkPasswordMatch);

    phone.addEventListener('input', () => {
      const isValid = /^\d{10}$/.test(phone.value);
      phone.setCustomValidity(isValid ? "" : "Invalid");
      phoneError.classList.toggle('hidden', isValid);
    });

    form.addEventListener('submit', (e) => {
      if (!form.checkValidity()) {
        e.preventDefault();
        form.reportValidity();
        return;
      }
    });
  </script>
</body>
</html>
